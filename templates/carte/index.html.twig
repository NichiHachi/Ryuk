{% extends 'base.html.twig' %}

{% block stylesheets %}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
	integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

<style>
	html,
	body {
		height: 100%;
		margin: 0;
	}

	.leaflet-container {
		height: 400px;
		width: 600px;
		max-width: 100%;
		max-height: 100%;
	}
</style>
{% endblock %}

{% block javascripts %}
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
	integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
{% endblock %}

{% block title %}Ryuk - Carte{% endblock %}

{% block content %}
<h2>Défibrillateurs, hôpitaux, cimetières</h2>
<article>
	Regarde ma giga carte
	<div id="map" style="width: 600px; height: 400px;"></div>

	<script>
		const defaultLocation = [37.764848, 125.625902];
		const mapObject = L.map('map');
		const map = mapObject.setView(defaultLocation, 20);
		let tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
				maxZoom: 19,
				attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
		}).addTo(map);

		// quand on a accès à la position
		navigator.geolocation.getCurrentPosition(function (location) {
			map.setView([location.coords.latitude, location.coords.longitude], 15);
			tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
				maxZoom: 19,
				attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
			});
		});
	</script>

</article>
{% endblock %}